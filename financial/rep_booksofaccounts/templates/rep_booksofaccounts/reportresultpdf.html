{% extends 'reports/base_books.html' %}
{% load humanize %}
{% block extra_css %}
    <style>
        td{
            vertical-align: top;
        }
    </style>
{% endblock %}

{% block main_content %}
    <table>
    {% if report_subtype == '(Summary Entries)' %}
        {% for data in data_list %}
            <tr>
                <td width="15%" style="padding-left: 5px;">{{ data.chartofaccount__accountcode }}</td>
                <td width="55%">{{ data.chartofaccount__description }}</td>
                <td width="15%" class="right">{% if data.debitdifference > 0 %}{{ data.debitdifference|floatformat:2|intcomma }}{% endif %}</td>
                <td width="15%" class="right">{% if data.creditdifference > 0 %}{{ data.creditdifference|floatformat:2|intcomma }}{% endif %}</td>
            </tr>
        {% endfor %}
        <tr style="padding-top: 5px;">
            <td colspan="2" class="center"><b>t o t a l</b></td>
            <td width="15%" class="right"><b><u>{{ report_total.debitdifference__sum|floatformat:2|intcomma }}</u></b></td>
            <td width="15%" class="right"><b><u>{{ report_total.creditdifference__sum|floatformat:2|intcomma }}</u></b></td>
        </tr>
    {% elif report_subtype == '(Detailed Entries)' %}
        {% for data, sort in data_list %}
            <tr style="font-size: 10px;">
                {% if report_type == 'GENERAL JOURNAL BOOK' %}
                    {% ifchanged data.jv_num %}
                        <tr>
                            <td style="width: 7%"></td>
                            <td style="width: 5%"></td>
                            <td style="width: 25%"></td>
                            <td style="width: 7%"></td>
                            <td style="width: 17%"></td>
                            <td style="width: 5%"></td>
                            <td style="width: 14%"></td>
                            <td style="width: 6%"></td>
                            <td style="width: 7%"></td>
                        </tr>
                    {% endifchanged %}
                    {% ifchanged data.jv_num %}
                        <td style="vertical-align: top; font-size: 10px;">
                            {{ data.jvmain__jvdate|date:'m/d/Y' }}
                        </td>
                        <td style="vertical-align: top; font-size: 10px;">
                            {% ifchanged data.jv_num %}
                                {{ data.jv_num }}
                            {% endifchanged %}
                        </td>
                        <td style="vertical-align: top; font-size: 10px;">
                            {% ifchanged data.jv_num %}
                                {{ data.jvmain__particular|slice:":70" }}
                            {% endifchanged %}
                        </td>
                    {% else %}
                        {% if sort.sort_number == 2 %}
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top">{{ data.jvmain__particular|slice:"70:140" }}</td>
                        {% elif sort.sort_number == 3 %}
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top">{{ data.jvmain__particular|slice:"140:210" }}</td>
                        {% elif sort.sort_number == 4 %}
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top">{{ data.jvmain__particular|slice:"210:280" }}</td>
                        {% elif sort.sort_number > 4 %}
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top">{{ data.jvmain__particular|slice:"280:350" }}</td>
                        {% endif %}
                    {% endifchanged %}
                {% elif report_type == 'CASH DISBURSEMENT BOOK' %}
                    {% ifchanged data.cv_num %}
                        <tr>
                            <td width="5%"></td>
                            <td width="19%"></td>
                            <td width="19%"></td>
                            <td width="3%"></td>
                            <td width="4%"></td>
                            <td width="5%"></td>
                            <td width="5%"></td>
                            <td width="16%"></td>
                            <td width="5%"></td>
                            <td width="6%"></td>
                            <td width="6%"></td>
                        </tr>
                    {% endifchanged %}
                    {% ifchanged data.cv_num %}
                        <td style="vertical-align: top; font-size: 10px;">
                            {{ data.cvmain__cvdate|date:'m/d/Y' }}
                        </td>
                        <td style="vertical-align: top; font-size: 10px;">
                            {% ifchanged data.cv_num %}
                                {{ data.cv_num }}&nbsp;&nbsp;&nbsp;{{ data.cvmain__payee_name }}
                            {% endifchanged %}
                        </td>
                        <td style="vertical-align: top; font-size: 10px;">
                            {% ifchanged data.cv_num %}
                                {{ data.cvmain__particulars|slice:":40" }}
                            {% endifchanged %}
                        </td>
                        <td style="vertical-align: top; font-size: 10px;">{{ data.cvmain__bankaccount__code }}</td>
                        <td style="vertical-align: top; font-size: 10px;">{{ data.cvmain__checknum }}</td>
                        <td style="vertical-align: top; font-size: 10px; text-align: right; padding-right: 5px;">{{ data.cvmain__amount|floatformat:2|intcomma }}</td>
                    {% else %}
                        {% if sort.sort_number == 2 %}
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top">TIN: {{ data.cvmain__payee__tin }}</td>
                            <td style="vertical-align: top">{{ data.cvmain__particulars|slice:"40:80" }}</td>
                            <td style="vertical-align: top;" colspan="3"></td>
                        {% elif sort.sort_number == 3 %}
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top">{{ data.cvmain__payee__address1 }}</td>
                            <td style="vertical-align: top">{{ data.cvmain__particulars|slice:"80:120" }}</td>
                            <td style="vertical-align: top;" colspan="3"></td>
                        {% elif sort.sort_number == 4 %}
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top">{{ data.cvmain__payee__address2 }}</td>
                            <td style="vertical-align: top">{{ data.cvmain__refnum }}</td>
                            <td style="vertical-align: top;" colspan="3"></td>
                        {% elif sort.sort_number > 4 %}
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top">{{ data.cvmain__particulars|slice:"120:160" }}</td>
                            <td style="vertical-align: top;" colspan="3"></td>
                        {% endif %}
                    {% endifchanged %}
                {% elif report_type == 'CASH RECEIPTS BOOK' %}
                    {% ifchanged data.or_num %}
                        <tr>
                            <td style="width: 5%"></td>
                            <td style="width: 5%"></td>
                            <td style="width: 18%"></td>
                            <td style="width: 19%"></td>
                            <td style="width: 5%"></td>
                            <td style="width: 3%"></td>
                            <td style="width: 5%"></td>
                            <td style="width: 12%"></td>
                            <td style="width: 3%"></td>
                            <td style="width: 8%"></td>
                            <td style="width: 5%"></td>
                            <td style="width: 5%"></td>
                        </tr>
                    {% endifchanged %}
                    {% ifchanged data.or_num %}
                        <td style="vertical-align: top; font-size: 10px;">
                            {{ data.ormain__ordate|date:'m/d/Y' }}
                        </td>
                        <td style="vertical-align: top; font-size: 10px;">
                            {% ifchanged data.or_num %}
                                {{ data.or_num }}
                            {% endifchanged %}
                        </td>
                        <td style="vertical-align: top; font-size: 10px;">
                            {% ifchanged data.or_num %}
                                {{ data.ormain__payee_name|slice:":70" }}
                            {% endifchanged %}
                        </td>
                        <td style="vertical-align: top; font-size: 10px;">
                            {% ifchanged data.or_num %}
                                {{ data.ormain__particulars|slice:":60" }}
                            {% endifchanged %}
                        </td>
                        <td style="vertical-align: top; font-size: 10px; text-align: right; padding-right: 5px;">{{ data.ormain__amount|floatformat:2|intcomma }}</td>
                        <td style="vertical-align: top; font-size: 10px;">{{ data.ormain__bankaccount__bank__code }}</td>
                    {% else %}
                        {% if sort.sort_number == 2 %}
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top">{{ data.ormain__payee_name|slice:"70:140" }}</td>
                            <td style="vertical-align: top">{{ data.ormain__particulars|slice:"60:120" }}</td>
                            <td style="vertical-align: top" colspan="2"></td>
                        {% elif sort.sort_number == 3 %}
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top">{{ data.ormain__particulars|slice:"120:180" }}</td>
                            <td style="vertical-align: top" colspan="2"></td>
                        {% elif sort.sort_number == 4 %}
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top">{{ data.ormain__particulars|slice:"180:240" }}</td>
                            <td style="vertical-align: top" colspan="2"></td>
                        {% elif sort.sort_number > 4 %}
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top"></td>
                            <td style="vertical-align: top">{{ data.ormain__particulars|slice:"240:300" }}</td>
                            <td style="vertical-align: top" colspan="2"></td>
                        {% endif %}
                    {% endifchanged %}
                {% endif %}
                <td style="vertical-align: top; font-size: 10px;">{{ data.chartofaccount__accountcode }}</td>
                <td style="vertical-align: top; font-size: 10px;">{{ data.chartofaccount__description }}</td>
                {% if report_type == 'CASH DISBURSEMENT BOOK' %}
                    <td style="vertical-align: top; font-size: 10px;">{% if data.bankaccount__code %}{{ data.bankaccount__code }} {{ data.bankaccount__bank__code }} {{ data.bankaccount__bankaccounttype__code }}A{% elif data.department__code %}{{ data.department__code }}{% else %}&nbsp;{% endif %}</td>
                {% else %}
                    <td style="vertical-align: top; font-size: 10px;">{% if data.bankaccount__code %}{{ data.bankaccount__code }}{% elif data.department__code %}{{ data.department__code }}{% else %}&nbsp;{% endif %}</td>
                    <td style="vertical-align: top; font-size: 10px;">{% if data.bankaccount__code %}{{ data.bankaccount__bank__code }} {{ data.bankaccount__bankaccounttype__code }}A{% elif data.department__code %}{{ data.department__departmentname }}{% else %}&nbsp;{% endif %}</td>
                {% endif %}
                <td style="vertical-align: top; font-size: 10px;" align="right">{{ data.debitamount__sum|default:''|floatformat:2|intcomma }}</td>
                <td style="vertical-align: top; font-size: 10px;" align="right">{{ data.creditamount__sum|default:''|floatformat:2|intcomma }}</td>
            </tr>
        {% endfor %}
        <tr style="border-top: 1px solid grey; padding-top: 5px;">
            <td colspan="{% if report_type == 'CASH DISBURSEMENT BOOK' %}7{% elif report_type == 'CASH RECEIPTS BOOK' %}8{% else %}5{% endif %}" class="right"><b>T o t a l</b></td>
            <td colspan="2">&nbsp;</td>
            <td class="right" {% if report_type == 'CASH DISBURSEMENT BOOK' or report_type == 'CASH RECEIPTS BOOK' %}style="font-size: 10px;"{% endif %}><b>{{ report_total.debitamount__sum__sum|floatformat:2|intcomma }}</b></td>
            <td class="right" {% if report_type == 'CASH DISBURSEMENT BOOK' or report_type == 'CASH RECEIPTS BOOK' %}style="font-size: 10px; padding-right: -3px;"{% endif %}><b>{{ report_total.creditamount__sum__sum|floatformat:2|intcomma }}</b></td>
        </tr>
    {% endif %}
    </table>
    {% if report_subtype == '(Detailed Entries)' %}
        <p class="table-header" style="margin-top: 50px;">Checked by:&nbsp;&nbsp;&nbsp;________________________</p>
        <p class="table-header">Date checked:&nbsp;&nbsp;&nbsp;________________________</p>
    {% endif %}
{% endblock main_content %}